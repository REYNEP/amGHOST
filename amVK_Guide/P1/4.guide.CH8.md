---
export_on_save:
  prince: true
---
<div class="REY_TITLE" align=center>

# Chapter 8: `CommandBuffer` ğŸ“

<div class="REY_TITLE_SUB1">

Rendering commands have to be Recorded in a CommandBuffer.
Only then the GPU can work on it ğŸ’â€â™€ï¸.
That's the idea, since decades ago, so yeah, xD.

</div>
</div>


## 0. `amVK` wrap ğŸŒ¯
```cpp
    #include "amVK_Synchronization.hh"
    #include "amVK_CommandPoolMAN.hh"

        // TwT
        REY_LOG("");
        #define amVK_S amVK_Sync
        #define CPCF CommandPoolCreateFlags
    amVK_CommandPoolMAN*CPMAN = new amVK_CommandPoolMAN(D);
                        CPMAN->init_CMDPool_Graphics(amVK_S::CPCF::RecordBuffer_MoreThanOnce);
                        CPMAN->CreateCommandPool_Graphics(flags);
                        CPMAN->AllocateCommandBuffers1_Graphics(1);

    amVK_CommandBufferPrimary *CB = new amVK_CommandBufferPrimary(CPMAN->BUFFs1.Graphics[0]);
```

## 1. `VkCommandPool`
#### ğŸ› ï¸ `VkCommandPoolCreateInfo`
- ğŸŒ‹ https://vkdoc.net/man/VkCommandPoolCreateInfo
    - `.sType` ğŸŸª `VK_STRUCTURE_TYPE_COMMAND_POOL_CREATE_INFO`
    - `.pNext` ğŸŸª `NULL`
    - `.flags` ğŸ³ï¸ `VkCommandPoolCreateFlagBits`
        - https://vkdoc.net/man/VkCommandPoolCreateFlagBits | [ivirtex-github](https://github.com/ivirtex/vulkan-hover-docs/tree/master/vscode_ext/vulkan_man_md_pages/VkCommandPoolCreateFlagBits.md)
            - ğŸ³ï¸ `TRANSIENT`
            - ğŸ³ï¸ `RESET_COMMAND_BUFFER`:- Lets you call `vkBeginCommandBuffer()` on same `CMDBUF` more than once
            - ğŸ³ï¸ `PROTECTED`
        - ğŸŸª `0`:- Can't call `vkBeginCommandBuffer()` more than once on the same `CMDBUF`
        </br>

    - `.queueFamilyIndex` 
        - ğŸŸª CommandPool = `as per queueFamily`
        - i am not sure if you can have multiple CommandPool on the same QueueFamily

#### ğŸ“¦ `vkCreateCommandPool()`
- ğŸŒ‹ https://vkdoc.net/man/vkCreateCommandPool
    - `.device` ğŸŸª ğŸ’â€â™€ï¸
    - `.pCreateInfo` ğŸŸª ğŸ’â€â™€ï¸
    - `.pAllocator` ğŸŸ¨ **ChapterZZZ**
    - `.pSemaphore` â†©ï¸ğŸ“¦
    </br> 

#### ğŸ“œ REY_DOCs
- Copy Paste `amVK_FrameBuffer.hh` Current Implementation & Change it as needed
    - Trust me, this is the most fun way of doing this, xP

#### ğŸ§Š `amVK` ğŸ”— [amVK_CommandPoolMAN.hh](https://github.com/REYNEP/amGHOST/blob/74cf5c96a9b12db4896f2f4c592cfd72923d6231/amVK/core/amVK_CommandPoolMAN.hh)





<div class="REY_NOSHOW_PDF">    </br></br></br></br></br></br>   </div><div class="REY_BR1_POSITIVE_PDF"></div>






## 2. `VkCommandBuffer`
#### ğŸ› ï¸ `VkCommandBufferAllocateInfo`
- https://vkdoc.net/man/VkCommandBufferAllocateInfo
    - `.sType` ğŸŸª `VK_STRUCTURE_TYPE_COMMAND_BUFFER_ALLOCATE_INFO`
    - `.pNext` ğŸŸª `NULL`
    - `.commandPool` ğŸŸª ğŸ’â€â™€ï¸
    - `.level` ğŸ”€ `PRIMARY/SECONDARY` [Toggle]
    - `.commandBufferCount` ğŸŸª ğŸ’â€â™€ï¸
    </br>

#### ğŸ“¦ `vkAllocateCommandBuffers()`
- https://vkdoc.net/man/vkAllocateCommandBuffers
    - `.device`
    - `.pAllocateInfo` ğŸŸª ğŸ’â€â™€ï¸
    - `pCommandBuffers` â†©ï¸ğŸ“¦
    </br>

#### ğŸ§Š `amVK` ğŸ”— [amVK_CommandPoolMAN.hh#L63](https://github.com/REYNEP/amGHOST/blob/74cf5c96a9b12db4896f2f4c592cfd72923d6231/amVK/core/amVK_CommandPoolMAN.hh#L63)
- both Primary & Secondary commandBuffers are supported
    - But, as off `01 May, 2025`
        - amVK Users must use one of the `amVK_CommandPoolCATs` (Categories) e.g. Graphics/Compute ğŸ’â€â™€ï¸
- ğŸ”— [amVK_Synchronization.hh](https://github.com/REYNEP/amGHOST/blob/74cf5c96a9b12db4896f2f4c592cfd72923d6231/amVK/common/amVK_Synchronization.hh)